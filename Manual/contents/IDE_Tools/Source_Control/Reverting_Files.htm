<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Rétablissement des fichiers</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <script src="../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section that covers Source Control reverting files" />
  <meta name="rh-index-keywords" content="Source Control - Reverting Files" />
  <meta name="search-keywords" content="revert files" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Rétablissement des fichiers</h1>
  <p>Dans les sections précédentes, vous avez vu comment <a href="Repository_Options.htm">créer un référentiel</a> et <a href="Standard_Workflow.htm">y commettre des choses</a>, mais que se passe-t-il si vous faites une erreur et que vous voulez &quot;revenir en arrière&quot; à un commit précédent ? Faisons une erreur délibérée et voyons comment nous pouvons la gérer...</p>
  <p>Tout d'abord, créez une nouvelle ressource - dans cet exemple, nous allons créer une ressource Script - et initialement, vous ne verrez pas d'icône d'état puisque, en ce qui concerne le contrôle de la source, elle n'existe pas encore. Dans la ressource script ajoutez une simple ligne de code, comme :</p>
  <p class="code">show_debug_message(&quot;Hello World&quot;);</p>
  <p>Si vous fermez maintenant l'éditeur de code, le script sera enregistré et l'icône du fichier modifié <img> apparaîtra à côté de lui dans le <a href="../../Introduction/The_Asset_Browser.htm">navigateur d'actifs</a>. Maintenant, ouvrez la fenêtre <strong>Commit </strong>et vous verrez qu'il y a quatre changements échelonnés, car de nouvelles ressources sont automatiquement ajoutées :</p>
  <p><img>Les changements mis en scène seront :</p>
  <ul class="colour">
    <li>le dossier du projet <span class="inline">.yyp</span> </li>
    <li>un fichier de vue</li>
    <li>le script <span class="notranslate">GML</span> lui-même</li>
    <li>le fichier <span class="inline">.yy</span> qui y fait référence</li>
  </ul>
  <p>Vous devez saisir un message de validation et cliquer sur le bouton <strong>Valider </strong>, comme nous l'avons expliqué précédemment. Maintenant, retournons à notre script et changeons la ligne de code en (par exemple) :</p>
  <p class="code">show_debug_message(&quot;Hello World, how are you?&quot;);</p>
  <p>Lorsque nous fermons l'éditeur de code, une icône rouge <img> s'affiche à côté du script, mais nous nous sommes rendu compte que nous avons fait une erreur dans notre code et nous voulons revenir à une version précédente pour la corriger (évidemment, vous pourriez simplement ouvrir le script et le corriger facilement, puisque l'exemple est si simple, mais dans les grands projets, ce n'est normalement pas une approche faisable). Ce que nous devons faire, c'est <strong>revenir sur </strong>nos modifications.</p>
  <p>Pour annuler une modification, nous devons d'abord ouvrir à nouveau la fenêtre de validation, donc nous allons dans <strong>Contrôle de la source</strong> &gt; <strong>Valider les modifications</strong> une fois de plus. Notre fichier modifié sera à nouveau mis en scène, prêt à être validé, mais ce n'est pas ce que nous voulons, alors nous cliquons sur le bouton <strong>Unstage All</strong> pour le retirer de la zone de mise en scène.</p>
  <p>Si nous faisons maintenant un clic droit <strong><img></strong> sur le fichier que nous avons modifié, nous obtiendrons un menu contextuel avec l'option " <strong>Revert Path"</strong>:</p>
  <p><img>Lorsque vous sélectionnez cette option, vous rétablissez les fichiers dans l'état dans lequel ils se trouvaient auparavant.</p>
  <p class="note"><strong>IMPORTANT !</strong> Lorsque vous faites un retour en arrière, vous obtiendrez un message vous demandant de recharger ou de sauvegarder le projet en cours, car le vérificateur de fichiers a détecté des changements sur le disque :<br />
    <img>. Vous devez cliquer sur Reload et non sur save, car le fait de sauvegarder sauvegardera ce qui est en mémoire plutôt que de recharger les fichiers inversés.
  </p>
  <p>C'est très bien lorsque vous modifiez quelque chose et que vous voulez revenir en arrière sans avoir déjà effectué une validation, mais qu'en est-il lorsque vous avez validé un ou plusieurs changements et que vous voulez revenir à une validation <em>précédente </em>? Eh bien, modifions à nouveau notre script pour dire :</p>
  <p class="code">show_debug_message(&quot;This is a bad idea&quot;);</p>
  <p>Maintenant, nous le commettons comme avant pour le mettre sous contrôle de la source. Donc, c'était une mauvaise idée et nous voulons revenir en arrière, ce qui signifie que nous devons commencer par ouvrir la fenêtre <strong>Source Control</strong> &gt; <strong>View History</strong>. Ici nous verrons une liste de tous les commits précédents maintenant dans cette fenêtre, en commençant par le commit initial, le commit pour le script, et ensuite le commit pour le script que nous avons édité comme une &quot;mauvaise idée&quot; :</p>
  <p><img>Nous avons maintenant deux choix. Nous pouvons inverser une révision entière - ce qui inversera tous les fichiers qui ont été modifiés à ceux du commit choisi - ou nous pouvons choisir d'inverser un chemin - ce qui inversera simplement un seul fichier. Commençons par la première option :</p>
  <ul class="colour">
    <li>Faites un clic droit <strong><img></strong> sur notre second commit dans le panneau <strong>Historique des Commissions (</strong> le commit &quot;Hello World&quot;).</li>
    <li>Sélectionnez <strong>Revenir à cette révision</strong>, puis choisissez <strong>ReLoad</strong> dans le message d'avertissement.</li>
  </ul>
  <p>Vous devriez voir que le script a maintenant une icône d'état rouge <img>, et si nous l'ouvrons, nous aurons ce qui suit :</p>
  <p><img>Nous pouvons alors faire un commit sur le projet et nous serons de nouveau au point de départ. Cependant, nous pouvons aussi annuler cette action pour le fichier et récupérer notre &quot;mauvaise idée&quot; en faisant ce qui suit :</p>
  <ul class="colour">
    <li>Ouvrez la fenêtre <strong>Commit Changes</strong>.</li>
    <li>Défaites le script contenant le code &quot;Hello World&quot;.</li>
    <li>Cliquez à droite <strong><img></strong> et <strong>inverser le chemin</strong>.</li>
  </ul>
  <p>Maintenant, nous avons à nouveau le fichier erroné dans le projet ! Nous pouvons profiter de cette occasion pour rétablir uniquement le chemin d'accès au fichier au lieu de tout rétablir à une révision précédente. Pour cela, nous devons faire ce qui suit :</p>
  <ul class="colour">
    <li>Ouvrez la fenêtre <strong>Historique des vues</strong>.</li>
    <li>Cliquez sur le deuxième commit (le commit &quot;Hello World&quot;).</li>
    <li>Cliquez avec le bouton droit de la souris <strong><img></strong> sur notre script <span class="notranslate">GML</span> dans le volet des fichiers et sélectionnez <strong>Revert Path</strong>.</li>
  </ul>
  <p>Nous devrions avoir à nouveau notre code &quot;Hello World&quot; et nous pouvons alors faire un nouveau commit pour mettre à jour le contrôle de source avec le fichier corrigé.</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Retour : <a href="../Source_Control.htm">Contrôle de la source</a></div>
        <div style="float:right">Suivant : <a href="Cloning_A_Repository.htm">Cloner un référentiel</a> </div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Source Control Reverting Files
reverting files
-->
  <!-- TAGS
source_control_revert
-->
</body>
</html>