<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Messages de diffusion</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <script src="../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page detailing the dope sheet" />
  <meta name="rh-index-keywords" content="Sequences - Broadcast Messages, Moments" />
  <meta name="search-keywords" content="broadcast,messages,broadcast messages,moments" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Messages de diffusion</h1>
  <p>Les <a href="../Sequences.htm">Séquences</a> et les <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprites.htm">Sprites</a> peuvent générer ce que l'on appelle des <strong>messages de diffusion</strong> à n'importe quel moment de leur durée. Ces messages sont de simples chaînes qui sont ajoutées à des images spécifiques le long de la ligne de temps de l'animation, et lorsque ce point de la ligne de temps est atteint, la chaîne est diffusée à toutes les instances qui l'écoutent. Toute instance disposant d'un <a href="../Object_Properties/Other_Events.htm">événement de diffusion de messages</a> (dans la catégorie d'événements<strong>&quot;Other</strong>&quot;) recevra la chaîne de messages lorsqu'elle atteindra ce point de la ligne de temps, et c'est à vous de prévoir un code qui l'analysera et réagira en conséquence. Notez également que les séquences peuvent également écouter les messages diffusés, mais cela nécessite que vous configuriez d'abord la méthode d'écoute en utilisant du code (voir la section <span class="notranslate">GML</span> sur les <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">événements et les moments des séquences</a> pour plus d'informations).</p>
  <p class="note"><strong><span class="note">NOTE</span></strong> Le fait de définir l'<strong>image_index </strong>d'une instance directement sur une image <em>ne</em> déclenchera <em>pas</em> les messages de diffusion qui peuvent être présents sur cette image du site <span class="notranslate">sprite</span> de l'objet.</p>
  <p>Pour ajouter un message à diffuser à la séquence ou à la timeline <span class="notranslate">sprite</span>, il suffit de cliquer sur le bouton <img>. Cela ouvrira une boîte de dialogue dans laquelle vous pourrez ajouter le message à diffuser :</p>
  <p class="dropspot"><img alt="Broadcast Message Button Icon" class="icon" src="../../assets/Images/Icons/Icon_Broadcast.png" /></p>
  <p>Une fois ajouté, le message sera affiché dans le cadre <span class="notranslate">Dope Sheet</span> (ou dans le cadre <span class="notranslate">sprite</span> ). Pour le modifier, vous devez cliquer avec le bouton droit de la souris <img> sur l'icône du message pour ouvrir une liste de tous les messages qui chevauchent le cadre (il ne peut y avoir qu'un seul message par cadre, mais si vous placez plusieurs messages sur des cadres consécutifs, ils se chevaucheront visuellement, ce qui rendra plus difficile la sélection de celui que vous voulez ; vous pouvez aussi avoir un message et un <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">moment</a> sur le même cadre), puis en sélectionner un dans cette liste ouvrira la boîte de dialogue du message où vous pourrez le modifier ou le supprimer.</p>
  <p>Lorsqu'un événement Broadcast Message est déclenché, une <a href="../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">carte DS</a> spéciale est créée et stockée dans la variable intégrée <span class="inline">event_data</span>. Cette variable ID est une variable intégrée de portée <em>globale </em>, mais elle ne contiendra des données de carte DS que dans l'événement qui l'a déclenchée - dans ce cas l'événement Message de diffusion - et renverra -1 à tous les autres moments. Les clés de l'événement sont les suivantes :</p>
  <table>
    <colgroup>
      <col />
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="3"><span data-keyref="Type_Struct_Message_Event"><a data-rhwidget="HyperlinkPopover" href="../../../The_Asset_Editors/Sequence_Properties/Broadcast_Messages.htm">Structure de l'événement de message</a></span></th>
      </tr>
      <tr>
        <th>Variable</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
      <tr>
        <td><span class="inline">event_type</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Overview/Data_Types.htm">Chaîne de caractères</a></span></td>
        <td>Ce sera la chaîne &quot;<span class="inline">sequence event</span>&quot; pour un message envoyé à partir d'une Séquence et &quot;<span class="inline">sprite event</span>&quot; pour un message envoyé à partir d'un <span class="notranslate">Sprite</span>.</td>
      </tr>
      <tr>
        <td><span class="inline">message</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Overview/Data_Types.htm">Chaîne de caractères</a></span></td>
        <td>Il contient la chaîne de messages qui a été reçue.</td>
      </tr>
      <tr>
        <td><span class="inline">element_id</span></td>
        <td><span data-keyref="Type_ID_Layer_Element"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_get_all_elements.htm">ID de l'élément de couche</a></span></td>
        <td>Il contient l'ID de l'élément de couche (séquence/sprite/instance) qui a déclenché le message. Vous pouvez ensuite utiliser cette valeur d'ID pour déterminer le type d'élément qui a généré le message à l'aide de la fonction <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_get_element_type.htm"><span class="inline">layer_get_element_type()</span></a> et utiliser les autres fonctions pertinentes pour le cibler ou exécuter une action telle que jouer un son, selon le cas.</td>
      </tr>
    </tbody>
  </table>
  <p>Notez que l'événement de message de diffusion d'une instance recevra plusieurs chaînes pour chacune des fois où un message de diffusion est envoyé. Vous n'avez pas besoin d'agir sur toutes ces chaînes et vous pouvez avoir différentes instances qui écoutent différentes chaînes de diffusion. Cependant, vous pouvez avoir une instance qui écoute des messages qui peuvent être reçus en même temps. Dans ce cas, l'événement sera déclenché plusieurs fois - <em>une fois pour chaque chaîne de messages</em>.</p>
  <p>Vous trouverez ci-dessous un bref exemple de la manière dont cet événement peut être vérifié :</p>
  <p class="code">if event_data[? &quot;event_type&quot;] == &quot;sequence event&quot; // or you can check &quot;sprite event&quot;<br />
    {<br />
        switch (event_data[? &quot;message&quot;])<br />
        {<br />
            case &quot;hit&quot;:<br />
                audio_play_sound(snd_hit, 0, false);<br />
            break;<br />
    <br />
            case &quot;destroy&quot;:<br />
                sequence_destroy(event_data[? &quot;element_id&quot;]);<br />
            break;<br />
        }<br />
    }
  </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Retour : <a href="../Sequences.htm">Séquences</a></div>
        <div style="float:right">Suivant : <a href="The_Sequence_Canvas.htm">Le canevas des séquences</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Sequences - Broadcast Messages
Broadcast Messages
-->
  <!-- TAGS
sequences_broadcast_messages
-->
</body>
</html>