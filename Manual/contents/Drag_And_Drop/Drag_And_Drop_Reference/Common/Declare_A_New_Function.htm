<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Déclarer une nouvelle fonction</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <script src="../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section detailing Declare A New Function" />
  <meta name="rh-index-keywords" content="GML Visual Action - Declare A New Function" />
  <meta name="search-keywords" content="Declare A New Function" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><img> Déclarer une nouvelle fonction</h1>
  <p>Cette action peut être utilisée pour créer une nouvelle fonction définie par l'utilisateur, qui peut ensuite être appelée à tout moment dans votre code. Une fonction définie par l'utilisateur est une fonction que vous définissez pour effectuer une tâche qui n'est pas couverte par les actions intégrées de <span class="notranslate">GML</span> Visual ou les fonctions de <span class="notranslate">GML</span> <span class="notranslate">runner</span>. Elle peut avoir une portée globale, d'instance ou locale (voir <a href="../../../GameMaker_Language/GML_Overview/Variables_And_Variable_Scope.htm">ici</a> pour plus d'informations sur la portée) ; elle peut également être utilisée comme <b>constructeur</b> pour créer des <a href="../../../GameMaker_Language/GML_Overview/Structs.htm">structures</a>. Pour en savoir plus sur l'utilisation de cette action pour créer des fonctions globales, veuillez consulter la section sur la <a href="../../Drag_And_Drop_Overview/Action_Block_Functions.htm">création de fonctions d'action</a>.</p>
  <p>Pour utiliser cette action, vous pouvez l'ajouter à un événement ou à un script et donner un nom à la nouvelle fonction. Vous fournissez ensuite les arguments/paramètres requis que la fonction prendra, ainsi que les valeurs par défaut pour tous les arguments facultatifs.</p>
  <p>Si la fonction doit être utilisée comme un constructeur (qui est utilisé pour créer un <span class="notranslate">struct</span>), vous devez alors cocher l'option <strong>Constructeur </strong>et utiliser ensuite l'action <a href="New.htm">Nouveau</a> pour créer un <span class="notranslate">struct</span> à partir de la fonction. Vous pouvez également marquer la fonction comme étant <b>statique</b>, ce qui signifie qu'elle ne sera définie qu'une seule fois, quel que soit le nombre de fois où cette action est exécutée. Enfin, si la fonction ne doit être utilisée que localement dans le même événement et nulle part ailleurs, vous pouvez activer l'option <strong>Temp. </strong></p>
  <p>Une fois que vous avez défini le nom et les paramètres, vous pouvez attacher les actions que vous voulez que la fonction exécute lorsqu'elle est appelée dans votre code, en les déposant sur le côté de l'action comme le montre l'image ci-dessous :</p>
  <p><img>Vous pouvez voir des exemples d'utilisation de cette action à la fois comme fonction régulière et comme fonction constructrice dans la section &quot;Exemples étendus&quot; ci-dessous.</p>
  <p> </p>
  <h4>Syntaxe de l'action :</h4>
  <p><img alt="Declare A New Function Icon" class="icon" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Common/i_Common_Declare_Function.png" /></p>
  <h4>Arguments :</h4>
  <table>
    <tbody>
      <tr>
        <th>Arguments</th>
        <th>Description</th>
      </tr>
      <tr>
        <td><span class="notranslate">Name</span></td>
        <td>Le nom de la nouvelle fonction.</td>
      </tr>
      <tr>
        <td><span class="notranslate">Argument [+]</span></td>
        <td>Les différents arguments qui peuvent être passés dans la fonction, et leurs valeurs par défaut si elles sont optionnelles.</td>
      </tr>
      <tr>
        <td><span class="notranslate">Constructor</span></td>
        <td>Si cette fonction est un constructeur.</td>
      </tr>
      <tr>
        <td><span class="notranslate">Static</span></td>
        <td>Si cette fonction est statique.</td>
      </tr>
      <tr>
        <td><span class="notranslate">Temp</span></td>
        <td>Si la fonction est temporaire (c'est-à-dire qu'elle n'est utilisée que dans le cadre de l'événement en cours).</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h1>Exemples étendus</h1>
  <h4>Exemple étendu 1</h4>
  <p><img>Le bloc d'action ci-dessus serait placé dans l'<b>événement de création d'</b> une instance ou d'un script, et déclare une nouvelle fonction appelée <span class="inline">set_vec</span> avec trois arguments : <span class="inline">_x</span>, <span class="inline">_y</span> et <span class="inline">spd</span>. Ces arguments sont ensuite utilisés dans les actions que la fonction contient pour définir la direction et la vitesse de l'instance, ce qui se produit lorsque la fonction est appelée. Vous appellerez ensuite la fonction à l'aide de l'action <a href="Function_Call.htm">Function Call</a> dans tout événement ultérieur, comme ceci :</p>
  <p><img>Dans l'image ci-dessus, la fonction <span class="inline">set_vec</span> est appelée, ce qui change la direction de l'instance pour qu'elle pointe vers la position X/Y de la souris et fixe la vitesse à 5.</p>
  <p> </p>
  <h4 id="h">Exemple étendu 2</h4>
  <p><img>Le bloc d'action ci-dessus s'insère dans l'<b>événement Create</b> d'une instance ou d'un script et déclare une nouvelle fonction <strong>constructrice</strong> appelée <span class="inline">init_char_struct</span> avec quatre arguments : <span class="inline">_name</span>, <span class="inline">_location</span>, <span class="inline">_hp</span> et <span class="inline">_mana</span>, les deux derniers étant facultatifs avec une valeur par défaut de 100 (cela signifie que si ces arguments ne sont pas spécifiés lorsque la fonction est appelée, leurs valeurs par défaut seront utilisées à la place). Ces arguments sont ensuite utilisés pour créer certaines variables au sein du site <span class="notranslate">struct</span> que la fonction crée.</p>
  <p>Plus tard, vous appellerez cette fonction à l'aide de l'action <a href="New.htm">Nouveau</a> pour créer un <span class="notranslate">struct</span>, comme ceci :</p>
  <p><img>La fonction est appelée et renvoie un nouveau <span class="notranslate">struct</span> qui est stocké dans le tableau <span class="inline">char</span>, et le <span class="notranslate">struct</span> sera rempli avec les variables <span class="inline">name</span>, <span class="inline">location</span>, <span class="inline">hp</span> et <span class="inline">mana</span>, définies avec les valeurs qui ont été passées dans les arguments correspondants dans l'appel de fonction.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Retour : <a href="Common_Actions_Library.htm">Actions communes</a></div>
        <div style="float:right">Suivant : <a href="Assign_Variable.htm">Attribuer une variable</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Action - Declare A New Function
-->
  <!-- TAGS
action_declare_function
-->
</body>
</html>